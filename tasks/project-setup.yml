---

- name: Install drupal project
  ignore_errors: yes
  become: no
  composer:
    command: create-project
    ignore_platform_reqs: yes
    arguments: "{{composer_project}} {{ drupal_root_dir }}"
    working_dir: "./"
    prefer_dist: yes

- name: Require extra packages.
  become: no
  loop: "{{ comoser_extras }}"
  composer:
      command: require
      ignore_platform_reqs: yes
      arguments: "{{ item }} --no-update"
      working_dir: "{{ drupal_root_dir }}"

- name: Update project.
  become: no
  composer:
      command: update
      ignore_platform_reqs: yes
      working_dir: "{{ drupal_root_dir }}"
      prefer_dist: yes

